<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>管理者画面</title>
</head>

<body>
	<h1>管理者：レート一覧</h1>
	<div>
		<a th:href="@{/admin/rates}">レート一覧</a> |
		<a th:href="@{/admin/users}">ユーザ管理</a> |
		<form method="post" action="/logout" style="display: inline;">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
			<button type="submit">ログアウト</button>
		</form>
	</div>
	<hr>
	<table border="1">
		<thead>
			<tr>
				<th>ID</th>
				<th>ユーザ</th>
				<th>基準通貨</th>
				<th>対象通貨</th>
				<th>レート</th>
				<th>金額</th>
				<th>変換後</th>
				<th>日時</th>
				<th>操作</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="rate : ${rates}">
				<td th:text="${rate.id}"></td>
				<td th:text="${rate.username}"></td>
				<td th:text="${rate.baseCurrency}"></td>
				<td th:text="${rate.targetCurrency}"></td>
				<td th:text="${#numbers.formatDecimal(rate.rate, 1, 'COMMA', 4, 'POINT')}"></td>
				<td th:text="${#numbers.formatDecimal(rate.amount, 1, 'COMMA', 2, 'POINT')}"></td>
				<td th:text="${#numbers.formatDecimal(rate.convertedAmount, 1, 'COMMA', 2, 'POINT')}"></td>
				<td th:text="${#temporals.format(rate.fetchedAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
				<td>
					<form th:action="@{/admin/rates/delete}" method="post">
						<input type="hidden" name="id" th:value="${rate.id}" />
						<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
						<button type="submit">削除</button>
					</form>
				</td>
			</tr>
		</tbody>
	</table>

</body>

</html>