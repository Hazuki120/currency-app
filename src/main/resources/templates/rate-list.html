<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>レート一覧</title>
	<style>
		body {
			font-family: sans-serif;
			margin: 20px;
		}

		table {
			border-collapse: collapse;
			width: 100%;
		}

		th,
		td {
			border: 1px solid #ccc;
			padding: 8px;
			text-align: left;
		}

		th {
			background: #f2f2f2;
		}

		h1 {
			margin-bottom: 20px;
		}
	</style>
</head>

<body>
	<nav sec:authorize="isAuthenticated()" style="margin-bottom: 20px;">
		<a href="/exchange">通貨変換</a>
		<a href="/rates">レート一覧</a>

		<!-- ログイン中のユーザ名 -->
		<span sec:authentication="name">user</span>さん

		<!-- ログアウトボタン（CSRF 対応済み） -->
		<form method="post" action="/logout">
			<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
			<button type="submit">ログアウト</button>
		</form>
	</nav>
	<h1>レート一覧</h1>
	<thead>
		<tr>
			<th>ID</th>
			<th>基準通貨</th>
			<th>対象通貨</th>
			<th>レート</th>
			<th>取得日時</th>
		</tr>
	</thead>
	<tbody>
		<tr th:each="rate : ${rates}">
			<td th:text="${rate.id}"></td>
			<td th:text="${rate.baseCurrency}"></td>
			<td th:text="${rate.targetCurrency}"></td>
			<td th:text="${rate.rate}"></td>
			<td th:text="${#temporals.format(rate.fetchedAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
		</tr>
	</tbody>

	<a href="/exchange">戻る</a>
</body>

</html>